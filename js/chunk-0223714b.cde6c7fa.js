(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0223714b"],{"129d":function(t,e,s){"use strict";s("56f8")},"381e":function(t,e,s){"use strict";s("dc55")},"56f8":function(t,e,s){},"8f98":function(t,e,s){"use strict";s("9725")},9725:function(t,e,s){},ae8d:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"card"}},[e("div",{staticClass:"card-img"},[e("img",{ref:"img",attrs:{src:t.data.images[0]}})]),e("div",{staticClass:"card-content"},[e("div",{staticClass:"title van-ellipsis"},[t._v(t._s(t.data.title))]),e("div",{staticClass:"desc van-ellipsis"},[t._v(t._s(t.data.desc))]),e("div",{staticClass:"tags van-ellipsis"},t._l(t.data.tags,(function(s,i){return e("div",{key:i,staticClass:"tags-item"},[t._v(" "+t._s(s)+" ")])})),0),e("div",{staticClass:"price"},[t._v("￥"+t._s(t.data.price))]),e("div",{staticClass:"count"},[t.counterMap[t.data.id]?e("div",{on:{click:function(e){return t.countNum(-1)}}},[e("img",{attrs:{src:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/rec.png",alt:""}})]):t._e(),t.counterMap[t.data.id]?e("div",{staticClass:"num"},[t._v(" "+t._s(t.counterMap[t.data.id])+" ")]):t._e(),e("div",{on:{click:function(e){return t.countNum(1)}}},[e("img",{attrs:{src:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/add.png",alt:""}})])])])])},c=[],a=s("2f62"),n=s("2b0e"),o=function(){var t=this,e=t._self._c;return t.exist?e("div",{style:{width:t.width+"px",height:t.height+"px",opacity:t.opacity,transform:`translate(${t.moveX}px, ${t.moveY}px) scale(${t.sx},${t.sy})`},attrs:{id:"item"}},[e("img",{attrs:{src:t.src,alt:""}})]):t._e()},r=[],d={},l=d,u=(s("129d"),s("2877")),h=Object(u["a"])(l,o,r,!1,null,"f8e6bbe8",null),p=h.exports;const g=n["a"].extend(p);var f=function({startX:t,startY:e,endX:s,endY:i,src:c,width:a,height:n}){const o=new g({el:document.createElement("div"),data(){return{moveX:t,moveY:e,sx:1,sy:1,opacity:1,exist:!0,src:c,width:a,height:n}}});document.body.appendChild(o.$el),setTimeout(()=>{o.moveX=s,o.moveY=i,o.sx=.1,o.sy=.1,o.opacity=0},0),setTimeout(()=>{o.exist=!1},1100)},m={props:["data","noFly","needNum"],data(){return{}},computed:{...Object(a["b"])(["counterMap"])},created(){},methods:{countNum(t){const{id:e}=this.data,s=this.counterMap[this.data.id];if(1===s&&-1===t&&this.needNum)return void this.$emit("noMore",s);if(this.$store.commit("saveLocalStorage",{id:e,value:t}),-1===t||this.noFly)return;const{left:i,top:c}=this.$refs.img.getBoundingClientRect(),{offsetWidth:a,offsetHeight:n}=this.$refs.img,o=document.getElementById("shop-car"),{left:r,top:d}=o.getBoundingClientRect(),{offsetWidth:l,offsetHeight:u}=o,h=r+l/2,p=d+u/2;f({startX:i,startY:c,endX:h,endY:p,src:this.$refs.img.src,width:a,height:n})}}},v=m,b=(s("381e"),Object(u["a"])(v,i,c,!1,null,null,null));e["a"]=b.exports},dc55:function(t,e,s){},fdaa:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"shopping"}},[e("div",{staticClass:"shopping-header"},[e("van-nav-bar",{attrs:{title:"购物车","right-text":"删除"},on:{"click-right":t.del}})],1),t.noData?e("div",{staticClass:"noData"},[e("img",{attrs:{src:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/shopping_bg.jpg",alt:""}})]):e("div",{staticClass:"list"},[e("van-checkbox-group",{ref:"checkboxGroup",model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.goodsList,(function(s){return e("div",{key:s.id,staticClass:"list-item"},[e("van-checkbox",{staticClass:"check",attrs:{name:s.id}}),e("Card",{attrs:{data:s,noFly:!0,needNum:!0},on:{noMore:t.noMore}})],1)})),0)],1),e("van-submit-bar",{attrs:{price:t.price,"button-text":`去结算(${t.totalNum})`},on:{submit:t.onSubmit}},[e("van-checkbox",{on:{click:t.checkAll},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("全选")])],1)],1)},c=[],a=(s("13d5"),s("ae8d")),n=s("365c"),o=s("2f62"),r=s("d399"),d=s("2241"),l={components:{Card:a["a"]},computed:{...Object(o["b"])(["counterMap"]),noData(){return!(this.goodsList.length>0)},totalNum(){const t=this.goodsList.filter(t=>this.result.includes(t.id)),e=t.reduce((t,e)=>t+(this.counterMap[e.id]||0),0);return e},price(){const t=this.goodsList.filter(t=>this.result.includes(t.id));let e=t.reduce((t,e)=>e.price_off?t+e.price_off*(this.counterMap[e.id]||0):t+e.price*(this.counterMap[e.id]||0),0);return e=Math.round(100*e),e}},watch:{result(){this.result.length===this.goodsList.length?this.checked=!0:this.checked=!1}},data(){return{result:[],goodsList:[],checked:!1}},async created(){const t=Object.keys(this.counterMap);if(0===t.length)return;const e=await n["a"](t.join());this.goodsList=[...e.data.list]},methods:{checkAll(){if(this.noData)return Object(r["a"])("购物车没有任何有效商品"),void(this.checked=!1);this.checked?this.$refs.checkboxGroup.toggleAll(!0):this.$refs.checkboxGroup.toggleAll(!1)},onSubmit(){},async del(){if(0!==this.result.length)try{await d["a"].confirm({message:"您是否要删除已选中商品"}),this.result.forEach(t=>{this.$store.commit("saveLocalStorage",{id:t,value:-1/0}),this.goodsList=this.goodsList.filter(t=>!this.result.includes(t.id))}),this.result=[]}catch(t){Object(r["a"])("您点了取消删除商品")}else Object(r["a"])("您还没选择商品")},noMore(){Object(r["a"])("该商品不能减少了")}}},u=l,h=(s("8f98"),s("2877")),p=Object(h["a"])(u,i,c,!1,null,"2507e651",null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-0223714b.cde6c7fa.js.map