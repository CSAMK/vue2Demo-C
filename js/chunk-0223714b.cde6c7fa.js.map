{"version":3,"sources":["webpack:///./src/tools/animate/index.vue?e8ed","webpack:///./src/components/Card.vue?5140","webpack:///./src/views/shopping.vue?1178","webpack:///./src/components/Card.vue","webpack:///./src/tools/animate/index.vue","webpack:///src/tools/animate/index.vue","webpack:///./src/tools/animate/index.vue?021a","webpack:///./src/tools/animate/index.vue?098f","webpack:///./src/tools/animate/index.js","webpack:///src/components/Card.vue","webpack:///./src/components/Card.vue?fd54","webpack:///./src/components/Card.vue?4322","webpack:///./src/views/shopping.vue","webpack:///src/views/shopping.vue","webpack:///./src/views/shopping.vue?6b17","webpack:///./src/views/shopping.vue?8c94"],"names":["render","_vm","this","_c","_self","attrs","staticClass","ref","data","images","_v","_s","title","desc","_l","tags","item","index","key","price","counterMap","id","on","$event","countNum","_e","staticRenderFns","exist","style","width","height","opacity","transform","moveX","moveY","sx","sy","src","component","Animate","Vue","extend","com","startX","startY","endX","endY","app","el","document","createElement","body","appendChild","$el","setTimeout","props","computed","created","methods","value","left","top","offsetWidth","offsetHeight","del","noData","model","result","callback","$$v","expression","goodsList","noMore","totalNum","onSubmit","checkAll","checked","components","Card","sum","watch","Toast","message"],"mappings":"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","file":"js/chunk-0223714b.cde6c7fa.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=f8e6bbe8&prod&scoped=true&lang=less&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Card.vue?vue&type=style&index=0&id=633416f0&prod&lang=less&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shopping.vue?vue&type=style&index=0&id=2507e651&prod&scoped=true&lang=less&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"card\"}},[_c('div',{staticClass:\"card-img\"},[_c('img',{ref:\"img\",attrs:{\"src\":_vm.data.images[0]}})]),_c('div',{staticClass:\"card-content\"},[_c('div',{staticClass:\"title van-ellipsis\"},[_vm._v(_vm._s(_vm.data.title))]),_c('div',{staticClass:\"desc van-ellipsis\"},[_vm._v(_vm._s(_vm.data.desc))]),_c('div',{staticClass:\"tags van-ellipsis\"},_vm._l((_vm.data.tags),function(item,index){return _c('div',{key:index,staticClass:\"tags-item\"},[_vm._v(\" \"+_vm._s(item)+\" \")])}),0),_c('div',{staticClass:\"price\"},[_vm._v(\"￥\"+_vm._s(_vm.data.price))]),_c('div',{staticClass:\"count\"},[(_vm.counterMap[_vm.data.id])?_c('div',{on:{\"click\":function($event){return _vm.countNum(-1)}}},[_c('img',{attrs:{\"src\":\"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/rec.png\",\"alt\":\"\"}})]):_vm._e(),(_vm.counterMap[_vm.data.id])?_c('div',{staticClass:\"num\"},[_vm._v(\" \"+_vm._s(_vm.counterMap[_vm.data.id])+\" \")]):_vm._e(),_c('div',{on:{\"click\":function($event){return _vm.countNum(1)}}},[_c('img',{attrs:{\"src\":\"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/add.png\",\"alt\":\"\"}})])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.exist)?_c('div',{style:({\n    width: `${_vm.width}px`,\n    height: `${_vm.height}px`,\n    opacity: _vm.opacity,\n    transform: `translate(${_vm.moveX}px, ${_vm.moveY}px) scale(${_vm.sx},${_vm.sy})`,\n  }),attrs:{\"id\":\"item\"}},[_c('img',{attrs:{\"src\":_vm.src,\"alt\":\"\"}})]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    id=\"item\"\n    :style=\"{\n      width: `${width}px`,\n      height: `${height}px`,\n      opacity,\n      transform: `translate(${moveX}px, ${moveY}px) scale(${sx},${sy})`,\n    }\"\n    v-if=\"exist\"\n  >\n    <img :src=\"src\" alt=\"\" />\n  </div>\n</template>\n\n<script>\nexport default {};\n</script>\n\n<style scoped lang=\"less\">\n#item {\n  position: fixed;\n  z-index: 100;\n  top: 0;\n  left: 0;\n  transition: all 0.7s;\n  transform-origin: 0% 0%;\n\n  img {\n    width: 100%;\n    border-radius: 50%;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=f8e6bbe8&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=f8e6bbe8&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f8e6bbe8\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport com from './index.vue';\n\nconst Animate = Vue.extend(com);\n\nexport default function ({\n  startX,\n  startY,\n  endX,\n  endY,\n  src,\n  width,\n  height,\n}) {\n  const app = new Animate({\n    el: document.createElement('div'),\n    data() {\n      return {\n        moveX: startX,\n        moveY: startY,\n        sx: 1,\n        sy: 1,\n        opacity: 1,\n        exist: true, // 用来判断是否展示的，方便后面来销毁组件\n        src,\n        width,\n        height,\n      };\n    },\n  });\n\n  // 插入到全局 DOM 中\n  document.body.appendChild(app.$el);\n\n  // 用于变化样式\n  setTimeout(() => {\n    app.moveX = endX;\n    app.moveY = endY;\n    app.sx = 0.1;\n    app.sy = 0.1;\n    app.opacity = 0;\n  }, 0);\n\n  // 销毁组件\n  setTimeout(() => {\n    app.exist = false;\n  }, 1100);\n}\n","// 商品卡片组件\n<template>\n  <div id=\"card\">\n    <div class=\"card-img\">\n      <img :src=\"data.images[0]\" ref=\"img\" />\n    </div>\n    <div class=\"card-content\">\n      <div class=\"title van-ellipsis\">{{ data.title }}</div>\n      <div class=\"desc van-ellipsis\">{{ data.desc }}</div>\n      <div class=\"tags van-ellipsis\">\n        <div class=\"tags-item\" v-for=\"(item, index) in data.tags\" :key=\"index\">\n          {{ item }}\n        </div>\n      </div>\n      <div class=\"price\">￥{{ data.price }}</div>\n      <div class=\"count\">\n        <div @click=\"countNum(-1)\" v-if=\"counterMap[data.id]\">\n          <img\n            src=\"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/rec.png\"\n            alt=\"\"\n          />\n        </div>\n        <div class=\"num\" v-if=\"counterMap[data.id]\">\n          {{ counterMap[data.id] }}\n        </div>\n        <div @click=\"countNum(1)\">\n          <img\n            src=\"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/add.png\"\n            alt=\"\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport Animate from '@/tools/animate/index';\n\nexport default {\n  props: ['data', 'noFly', 'needNum'],\n  data() {\n    return {};\n  },\n  computed: {\n    ...mapState(['counterMap']),\n  },\n  created() {\n    // console.log(this.counterMap);\n  },\n  methods: {\n    countNum(value) {\n      // console.log(value);\n      const { id } = this.data;\n      const num = this.counterMap[this.data.id];\n\n      if (num === 1 && value === -1 && this.needNum) {\n        this.$emit('noMore', num);\n        return;\n      }\n      this.$store.commit('saveLocalStorage', { id, value });\n\n      if (value === -1 || this.noFly) {\n        return;\n      }\n\n      const { left: imgLeft, top: imgTop } = this.$refs.img.getBoundingClientRect();\n      const { offsetWidth: imgWidth, offsetHeight: imgHeight } = this.$refs.img;\n\n      const shopCar = document.getElementById('shop-car');\n      const { left: carX, top: carY } = shopCar.getBoundingClientRect();\n      const { offsetWidth: carWidth, offsetHeight: carHeight } = shopCar;\n\n      const endX = carX + carWidth / 2;\n      const endY = carY + carHeight / 2;\n\n      Animate({\n        startX: imgLeft,\n        startY: imgTop,\n        endX,\n        endY,\n        src: this.$refs.img.src,\n        width: imgWidth,\n        height: imgHeight,\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\">\n@import url(\"~@/assets/css/card.less\");\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Card.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Card.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Card.vue?vue&type=template&id=633416f0&\"\nimport script from \"./Card.vue?vue&type=script&lang=js&\"\nexport * from \"./Card.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Card.vue?vue&type=style&index=0&id=633416f0&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"shopping\"}},[_c('div',{staticClass:\"shopping-header\"},[_c('van-nav-bar',{attrs:{\"title\":\"购物车\",\"right-text\":\"删除\"},on:{\"click-right\":_vm.del}})],1),(!_vm.noData)?_c('div',{staticClass:\"list\"},[_c('van-checkbox-group',{ref:\"checkboxGroup\",model:{value:(_vm.result),callback:function ($$v) {_vm.result=$$v},expression:\"result\"}},_vm._l((_vm.goodsList),function(item){return _c('div',{key:item.id,staticClass:\"list-item\"},[_c('van-checkbox',{staticClass:\"check\",attrs:{\"name\":item.id}}),_c('Card',{attrs:{\"data\":item,\"noFly\":true,\"needNum\":true},on:{\"noMore\":_vm.noMore}})],1)}),0)],1):_c('div',{staticClass:\"noData\"},[_c('img',{attrs:{\"src\":\"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/shopping_bg.jpg\",\"alt\":\"\"}})]),_c('van-submit-bar',{attrs:{\"price\":_vm.price,\"button-text\":`去结算(${_vm.totalNum})`},on:{\"submit\":_vm.onSubmit}},[_c('van-checkbox',{on:{\"click\":_vm.checkAll},model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}},[_vm._v(\"全选\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 购物车页面\n<template>\n  <div id=\"shopping\">\n    <div class=\"shopping-header\">\n      <van-nav-bar\n        title=\"购物车\"\n        right-text=\"删除\"\n        @click-right=\"del\"\n      ></van-nav-bar>\n    </div>\n\n    <div class=\"list\" v-if=\"!noData\">\n      <van-checkbox-group v-model=\"result\" ref=\"checkboxGroup\">\n        <div class=\"list-item\" v-for=\"item in goodsList\" :key=\"item.id\">\n          <van-checkbox :name=\"item.id\" class=\"check\"></van-checkbox>\n          <Card :data=\"item\" :noFly=\"true\" @noMore=\"noMore\" :needNum=\"true\" />\n        </div>\n      </van-checkbox-group>\n    </div>\n\n    <div class=\"noData\" v-else>\n      <img\n        src=\"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/shopping_bg.jpg\"\n        alt=\"\"\n      />\n    </div>\n\n    <van-submit-bar\n      :price=\"price\"\n      :button-text=\"`去结算(${totalNum})`\"\n      @submit=\"onSubmit\"\n    >\n      <van-checkbox v-model=\"checked\" @click=\"checkAll\">全选</van-checkbox>\n    </van-submit-bar>\n  </div>\n</template>\n\n<script>\nimport Card from '@/components/Card.vue';\nimport * as API from '@/api/index';\nimport { mapState } from 'vuex';\nimport { Toast, Dialog } from 'vant';\n\nexport default {\n  components: {\n    Card,\n  },\n  computed: {\n    ...mapState(['counterMap']),\n    noData() {\n      return !(this.goodsList.length > 0);\n    },\n    totalNum() {\n      const result = this.goodsList.filter((item) => this.result.includes(item.id));\n\n      const sum = result.reduce(\n        (prev, next) => prev + (this.counterMap[next.id] || 0),\n        0,\n      );\n\n      return sum;\n    },\n    price() {\n      const result = this.goodsList.filter((item) => this.result.includes(item.id));\n      // console.log(result);\n\n      let sum = result.reduce((prev, next) => {\n        if (next.price_off) {\n          return prev + next.price_off * (this.counterMap[next.id] || 0);\n        }\n        return prev + next.price * (this.counterMap[next.id] || 0);\n      }, 0);\n      sum = Math.round(sum * 100);\n      // console.log(sum);\n      return sum;\n    },\n  },\n  watch: {\n    result() {\n      if (this.result.length === this.goodsList.length) {\n        this.checked = true;\n      } else {\n        this.checked = false;\n      }\n    },\n  },\n  data() {\n    return {\n      result: [],\n      goodsList: [],\n      checked: false,\n    };\n  },\n  async created() {\n    const ids = Object.keys(this.counterMap);\n    if (ids.length === 0) {\n      return;\n    }\n    const res = await API.getGoodsByIds(ids.join());\n    // console.log(res);\n    this.goodsList = [...res.data.list];\n  },\n  methods: {\n    checkAll() {\n      if (this.noData) {\n        Toast('购物车没有任何有效商品');\n        this.checked = false;\n        return;\n      }\n      if (this.checked) {\n        this.$refs.checkboxGroup.toggleAll(true);\n      } else {\n        this.$refs.checkboxGroup.toggleAll(false);\n      }\n    },\n    onSubmit() {\n      // return \"onSubmit\";\n    },\n    async del() {\n      if (this.result.length === 0) {\n        Toast('您还没选择商品');\n        return;\n      }\n      try {\n        await Dialog.confirm({\n          message: '您是否要删除已选中商品',\n        });\n\n        this.result.forEach((id) => {\n          this.$store.commit('saveLocalStorage', { id, value: -Infinity });\n          this.goodsList = this.goodsList.filter(\n            (item) => !this.result.includes(item.id),\n          );\n        });\n        this.result = [];\n      } catch (error) {\n        Toast('您点了取消删除商品');\n      }\n    },\n    noMore() {\n      Toast('该商品不能减少了');\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n#shopping {\n  background: #eee;\n  min-height: 100vh;\n\n  .shopping-header {\n    position: fixed;\n    top: 0;\n    width: 100%;\n    z-index: 10;\n  }\n\n  .list {\n    width: 100%;\n    position: absolute;\n    top: 46px;\n    z-index: 0;\n    box-sizing: border-box;\n    padding: 10px 10px 100px;\n    background: #fff;\n\n    .list-item {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n\n      .check {\n        margin-right: 10px;\n        flex-shrink: 0;\n      }\n    }\n  }\n\n  .van-submit-bar {\n    bottom: 50px;\n  }\n\n  .noData {\n    position: absolute;\n    top: 46px;\n    width: 100%;\n    box-sizing: border-box;\n    height: 50%;\n    padding: 50px 0;\n    background: #fff;\n\n    img {\n      width: 100%;\n      height: 202px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shopping.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shopping.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./shopping.vue?vue&type=template&id=2507e651&scoped=true&\"\nimport script from \"./shopping.vue?vue&type=script&lang=js&\"\nexport * from \"./shopping.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shopping.vue?vue&type=style&index=0&id=2507e651&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2507e651\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}